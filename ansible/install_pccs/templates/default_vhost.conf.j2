
############
# Backend
############

server {
        listen 443 ssl default_server;

        server_name {{ pccs_domain_name }};

        location / {
                # First attempt to serve request as file, then
                # as directory, then fall back to displaying a 404.
                # try_files $uri $uri/ =404;
                proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
                proxy_set_header Host $http_host;
                proxy_set_header X-Forwarded-Proto https;
                proxy_redirect off;
                proxy_pass https://localhost:8081/;
                proxy_http_version 1.1;

        }

        ssl_certificate /etc/letsencrypt/live/{{ pccs_domain_name }}/fullchain.pem;
        ssl_certificate_key /etc/letsencrypt/live/{{ pccs_domain_name }}/privkey.pem;
}